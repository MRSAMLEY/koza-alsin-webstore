{% extends "base.html" %}
{% block content %}
<h1 class="text-2xl font-bold mb-6">Admin â€” Products</h1>

<div class="grid grid-cols-1 md:grid-cols-2 gap-8">
  <form action="/admin/products" method="post" class="bg-white rounded-2xl shadow p-6 space-y-4">
    <input type="hidden" name="password" value="{{ request.query_params.get('password', 'admin') }}">
    <div>
      <label class="block text-sm mb-1">Name</label>
      <input type="text" name="name" class="w-full border rounded-xl px-3 py-2" required>
    </div>
    <div>
      <label class="block text-sm mb-1">Description</label>
      <textarea name="description" class="w-full border rounded-xl px-3 py-2" rows="3"></textarea>
    </div>
    <div class="grid grid-cols-2 gap-4">
      <div>
        <label class="block text-sm mb-1">Price (EUR)</label>
        <input type="number" step="0.01" name="price_eur" class="w-full border rounded-xl px-3 py-2" required>
      </div>
      <div>
        <label class="block text-sm mb-1">Image URL</label>
        <input type="url" name="image_url" class="w-full border rounded-xl px-3 py-2">
      </div>
    </div>
    <button class="px-4 py-2 rounded-xl border hover:bg-gray-50">Add Product</button>
  </form>

  <div class="bg-white rounded-2xl shadow">
    <div class="p-4 font-semibold border-b">Existing Products</div>
    <ul class="divide-y">
      {% for p in products %}
      <li class="p-4 flex items-center gap-4">
        <img src="{{ p.image_url }}" class="w-16 h-16 object-cover rounded-xl border" alt="">
        <div class="flex-1">
          <div class="font-medium">{{ p.name }}</div>
          <div class="text-sm text-gray-600">{{ price(p.price_cents) }}</div>
        </div>
        <a href="/product/{{ p.id }}" class="text-sm underline">View</a>
      </li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}
